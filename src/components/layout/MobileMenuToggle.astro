---
// src/components/layout/MobileMenuToggle.astro
---

<button class="mobile-menu-toggle" id="mobile-menu-toggle">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
</button>

<style>
    .mobile-menu-toggle {
        display: none;
        flex-direction: column;
        gap: 4px;
        background: transparent;
        border: none;
        padding: var(--space-2);
        cursor: pointer;
        border-radius: var(--radius-md);
        transition: background-color var(--transition-fast);
    }

    .mobile-menu-toggle:hover {
        background: var(--color-bg-secondary);
    }

    .hamburger-line {
        width: 24px;
        height: 3px;
        background: var(--color-text);
        border-radius: 2px;
        transition: all var(--transition-fast);
    }

    .mobile-menu-toggle.active .hamburger-line:nth-child(1) {
        transform: rotate(45deg) translate(6px, 6px);
    }

    .mobile-menu-toggle.active .hamburger-line:nth-child(2) {
        opacity: 0;
    }

    .mobile-menu-toggle.active .hamburger-line:nth-child(3) {
        transform: rotate(-45deg) translate(6px, -6px);
    }

    @media (max-width: 1024px) {
        .mobile-menu-toggle {
            display: flex;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const toggle = document.getElementById('mobile-menu-toggle') as HTMLButtonElement | null;
        const sidebar = document.querySelector('.sidebar') as HTMLElement | null;

        if (toggle && sidebar) {
            toggle.addEventListener('click', () => {
                toggle.classList.toggle('active');
                sidebar.classList.toggle('mobile-open');
            });

            // Close sidebar when clicking outside
            document.addEventListener('click', (e: Event) => {
                const target = e.target as HTMLElement | null;
                if (target && !sidebar.contains(target) && !toggle.contains(target)) {
                    toggle.classList.remove('active');
                    sidebar.classList.remove('mobile-open');
                }
            });
        }
    });
</script>